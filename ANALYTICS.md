# Аналитика и отслеживание событий

## Yandex.Metrica

Счетчик ID: `105392489`

### Отслеживаемые события

#### 1. Формы

**`form_submit`** - Отправка формы записи
- Параметры:
  - `form_name`: `enrollment_form` | `promo_form`
- Где: `EnrollmentModal`
- Триггер: Успешная отправка формы

#### 2. Абонементы

**`subscription_click`** - Клик по кнопке записи на абонемент
- Параметры:
  - `subscription_name`: название абонемента
  - `price`: стоимость
- Где: `Program` компонент
- Триггер: Клик на кнопку "Запись"

#### 3. Социальные сети

**`social_network_click`** - Клик по иконке социальной сети
- Параметры:
  - `social_network`: название соцсети (Telegram, VK, TikTok, Instagram, YouTube)
- Где: `Socials` компонент
- Триггер: Клик на иконку соцсети

#### 4. Контакты

**`phone_click`** - Клик по номеру телефона
- Где: `Contacts` компонент
- Триггер: Клик на ссылку с телефоном

**`email_click`** - Клик по email
- Где: `Contacts` компонент
- Триггер: Клик на ссылку с email

**`map_click`** - Клик по карте
- Где: `Contacts` компонент
- Триггер: Клик на ссылку Яндекс.Карт

#### 5. Модальные окна

**`open_enrollment_modal`** - Открытие модального окна записи
- Где: `EnrollmentSection`
- Триггер: Клик на кнопку "Оставить заявку"

#### 6. Telegram

**`write-tg`** - Клик по кнопке "Написать в Telegram"
- Где: `EnrollmentSection`
- Триггер: Клик на иконку Telegram

## Настройка целей в Yandex.Metrica

### Шаг 1: Войдите в Яндекс.Метрику
1. Перейдите на https://metrika.yandex.ru
2. Выберите счетчик `105392489`

### Шаг 2: Создайте цели

Перейдите в **Настройки → Цели** и создайте следующие цели:

#### Цель 1: Отправка формы
- Название: `Отправка формы записи`
- Тип: `JavaScript-событие`
- Идентификатор цели: `form_submit`

#### Цель 2: Клик по абонементу
- Название: `Клик по абонементу`
- Тип: `JavaScript-событие`
- Идентификатор цели: `subscription_click`

#### Цель 3: Переход в соцсети
- Название: `Переход в социальные сети`
- Тип: `JavaScript-событие`
- Идентификатор цели: `social_network_click`

#### Цель 4: Клик по телефону
- Название: `Клик по телефону`
- Тип: `JavaScript-событие`
- Идентификатор цели: `phone_click`

#### Цель 5: Клик по email
- Название: `Клик по email`
- Тип: `JavaScript-событие`
- Идентификатор цели: `email_click`

#### Цель 6: Открытие формы
- Название: `Открытие формы записи`
- Тип: `JavaScript-событие`
- Идентификатор цели: `open_enrollment_modal`

#### Цель 7: Написать в Telegram
- Название: `Написать в Telegram`
- Тип: `JavaScript-событие`
- Идентификатор цели: `write-tg`

## Просмотр статистики

### В Яндекс.Метрике

1. **Отчеты → Стандартные отчеты → Конверсии**
   - Просмотр достижения целей
   - Конверсия по каждой цели

2. **Отчеты → Стандартные отчеты → Содержание → События**
   - Детальная статистика по событиям
   - Параметры событий

3. **Отчеты → Мои отчеты**
   - Создайте кастомные отчеты
   - Сегментируйте данные

## Полезные метрики

### Конверсионная воронка

1. Посещение сайта
2. Открытие формы (`open_enrollment_modal`)
3. Отправка формы (`form_submit`)

### Популярные абонементы

Отчет по событию `subscription_click` с группировкой по параметру `subscription_name`

### Эффективность соцсетей

Отчет по событию `social_network_click` с группировкой по параметру `social_network`

## Отладка

### В режиме разработки

Yandex.Metrica отключается автоматически. В консоли будет:
```
Yandex.Metrica disabled in development mode
```

### В production

Откройте консоль браузера и выполните:
```javascript
// Проверка инициализации
console.log(window.ym)
console.log(window.ymInitialized)

// Ручная отправка события
window.ym(105392489, 'reachGoal', 'test_event')
```

### Расширение для браузера

Установите расширение **Yandex.Metrica Debugger** для Chrome/Firefox:
- Показывает отправленные события в реальном времени
- Помогает отладить проблемы с отслеживанием

## Рекомендации

1. **Регулярно проверяйте отчеты** - минимум раз в неделю
2. **Анализируйте воронку** - где теряются пользователи
3. **A/B тестирование** - тестируйте разные варианты кнопок и форм
4. **Сегментация** - анализируйте поведение разных групп пользователей
5. **Цели в рекламе** - используйте цели для оптимизации рекламных кампаний

## Интеграция с рекламой

### Яндекс.Директ

1. Привяжите счетчик Метрики к кампании
2. Используйте цели для оптимизации ставок
3. Настройте ретаргетинг на пользователей, достигших целей

### VK Реклама

1. Установите пиксель VK
2. Передавайте события из Метрики в VK
3. Создавайте похожие аудитории

## Конфиденциальность

Все данные собираются в соответствии с:
- Политикой конфиденциальности сайта
- Требованиями GDPR (для европейских пользователей)
- Федеральным законом №152-ФЗ "О персональных данных"

Пользователи могут отключить отслеживание через настройки браузера или расширения для блокировки счетчиков.
